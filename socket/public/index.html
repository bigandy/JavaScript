<!doctype html>
<html>
  <head>
	<title>ON / OFF LIGHT</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- <link rel="stylesheet" href="./css/style.css"> -->
  </head>
  <body>
	<ul id="messages"></ul>
	<form action="">
	  <button id="on">On</button>
	  <button id="off">Off</button>
	</form>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		var socket = io(),
			lightOn = document.getElementById('on'),
			lightOff = document.getElementById('off');

		lightOn.addEventListener('click', function(e) {
			e.preventDefault();
			socket.emit('lights on');

			document.title = 'ON';
		}, false);

		lightOff.addEventListener('click', function(e) {
			e.preventDefault();
			socket.emit('lights off');

			document.title = 'OFF';
		}, false);

		socket.on('bg change', function(msg) {
			console.log(msg);

			if (msg === 'on') {
				document.getElementsByTagName('body')[0].style.backgroundColor = 'yellow';
				document.title = 'ON';
			} else {
				document.getElementsByTagName('body')[0].style.backgroundColor = 'black';
				document.title = 'OFF';
			}
		});
	</script>
  </body>
</html>
